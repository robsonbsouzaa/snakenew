<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Jogo da Cobrinha</title>
  <link rel="stylesheet" href="styles.css">
  <script type="module" src="firebase.js"></script>
  <script type="module" src="game.js"></script>
</head>
<body>
  <div id="game-container">
    <h1>Jogo da Cobrinha</h1>
    
    <!-- Instruções -->
    <p>Use as teclas <b>WASD</b> para controlar a cobra.</p>
    <p>Pressione <b>Espaço</b> para perder automaticamente.</p>

    <!-- Contagem regressiva -->
    <p id="countdown" style="font-size: 24px; font-weight: bold; color: red; display: none;"></p>

    <!-- Canvas do jogo -->
    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <!-- Exibição da pontuação -->
    <p>Pontuação: <span id="score">0</span></p>

    <!-- Botões -->
    <button id="start-game">Começar Jogo</button>
    <button id="ranking">Ver Ranking</button>
    <button id="logout">Sair</button>
  </div>

  <script>
    // Redirecionar para o ranking
    document.getElementById('ranking').addEventListener('click', () => {
      window.location.href = 'ranking.html';
    });

    // Logout (Firebase Auth)
    document.getElementById('logout').addEventListener('click', async () => {
      const { auth } = await import('./firebase.js');
      await auth.signOut();
      alert('Você saiu da conta.');
      window.location.href = 'index.html';
    });

    // Desabilitar botão enquanto o jogo estiver rodando
    document.getElementById('start-game').addEventListener('click', () => {
      const startButton = document.getElementById('start-game');
      startButton.disabled = true; // Desativa o botão enquanto o jogo roda

      // O botão será reativado pelo game.js quando o jogador perder
    });

  </script>
</body>
</html>
